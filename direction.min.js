/*
 direction.js (c) 2015 Oluwaseun Ogedengbe, MIT seun40.github.io/direction.js/*/
direction=function(c,k,v){var h={parent:null,offset:0,loading:{lines:16,rate:1E3/30,diameter:250,xpos:.5,ypos:.5,back:"#FFF",color:"#373737"},config:{dir:"assets/",pagestartnum:!1,chapterstartnum:!1,imgprebuffer:5,imgpostbuffer:5,startpage:0,back:"#FFF"},pages:[]};if(void 0===c)return-1;if("string"===typeof c)h.pages.push({alt:"",hover:"",title:"",url:[c],release:0,note:"",perm:!1,anim8:!1}),c=h;else if(Array.isArray(c)){for(var b=0;b<c.length;b++)if(h.pages.push({alt:"",hover:"",title:"",url:[],
release:0,note:"",perm:!1,anim8:!1}),Array.isArray(c[b]))for(var w=0;w<c[b].length;w++)h.pages[b].url.push(c[b][w]);else h.pages[b].url.push(c[b]);c=h}else if(void 0===c.pages[0].url)return-1;if(void 0===k||null==k)k=0;var f=c.pages,l=c.pages.length,x=!0,q=-1,m=c.loading,n=c.config,r=[],t=[],g=new Image,y=!0,e=[document.createElement("canvas"),document.createElement("canvas")],z=e[1].getContext("2d"),A=b=function(){return 0},u=b,B=b,D={context:e[0].getContext("2d"),color:m.color,start:Date.now(),
lines:m.lines,diameter:m.diameter,rate:m.rate},E=function(a){e[0].style.paddingLeft=(e[1].width-300)/2+"px";var b=Math.floor((Date.now()-a.start)/1E3*a.lines)/a.lines,d=a.color.substr(1);a.context.save();a.context.clearRect(0,0,300,480);a.context.translate(150,240);a.context.rotate(2*Math.PI*b);3==d.length&&(d=d[0]+C[0]+d[1]+d[1]+d[2]+d[2]);for(var b=parseInt(d.substr(0,2),16).toString(),c=parseInt(d.substr(2,2),16).toString(),d=parseInt(d.substr(4,2),16).toString(),f=0;f<a.lines;f++)a.context.beginPath(),
a.context.rotate(2*Math.PI/a.lines),a.context.moveTo(a.diameter/10,0),a.context.lineTo(a.diameter/4,0),a.context.lineWidth=a.diameter/30,a.context.strokeStyle="rgba("+b+","+c+","+d+","+f/a.lines+")",a.context.stroke();a.context.restore();x&&window.setTimeout(E,a.rate,D)},F=function(a,b){if(null===a||void 0===a)a={x:0,y:0};else if(isNaN(a)){if(null===a.y||void 0===a.y)a.y=0;if(null===a.x||void 0===a.x)a.x=0}else a={x:0,y:a};if(null===b||void 0===b)b=400;0>a.y&&(a.y=window.innerHeight||document.documentElement.clientHeight||
document.body.clientHeight);0>a.x&&(a.x=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth);var d={x:void 0!==window.pageXOffset?a.x-window.pageXOffset:a.x-document.documentElement.scrollLeft,y:void 0!==window.pageYOffset?a.y-window.pageYOffset:a.y-document.documentElement.scrollTop};if(d=={x:0,y:0})return d;var e=function(a,b,d){window.scrollBy(Math.floor(a.x)/b,Math.floor(a.y)/b);d+1<5*b&&window.setTimeout(e,5,a,b,d+1)};window.setTimeout(e,5,d,Math.floor(b/5),0);
return d},h=function(){f[this.imaginaryID].loaded=!0},p=function(a,b){x=!0;window.setTimeout(E,m.rate,D);A();f[b].loaded||z.clearRect(0,0,e[1].width,e[1].height);a.imaginaryID=b;a.src=n.dir+f[b].url[0];for(var d=0,c=b-1;c>b-n.imgprebuffer-1&&0<=c;c--)f[c].loaded||(t[d].imaginaryID=c,t[d].src=n.dir+f[c].url,d++);d=0;for(c=b+1;c<n.imgpostbuffer+b+1&&c<l;c++)f[c].loaded||(r[d].imaginaryID=c,r[d].src=n.dir+f[c].url,d++)};this.count=function(){return l};this.current=function(){return q};this.callback=
function(a,b){if(null===a||void 0===a)return u;if(null===b||void 0===b)return a?0<a?A:B:u;a?0<a?A=b:B=b:u=b;return 1};this.go=function(a){a=null===a||void 0===a?0:parseInt(a,10);a=isNaN(a)?0:a;p(g,Math.floor(Math.max(0,Math.min(l-1,a))));return a};this.prev=function(){var a=q-1;0<=a&&p(g,a);return a};this.next=function(){var a=q+1;a<l&&p(g,a);return a};this.frst=function(){0<=q&&p(g,0);return 0};this.last=function(){p(g,l-1);return l-1};this.rand=function(){var a=Math.floor(Math.random()*(l-1));p(g,
a);return a};this.data=function(a){a=null===a||void 0===a?0:parseInt(a,10);return isNaN(a)?f[q]:f[a]};this.scroll=function(a){return null===a||void 0===a?y:y=a};this.scrollTo=function(a,b){return F(a,b)};e[0].height=480;e[0].style.background=m.back;e[0].style.paddingLeft="170px";e[0].style.zIndex=0;e[0].style.position="absolute";k?k.appendChild(e[0]):document.body.appendChild(e[0]);window.setTimeout(E,m.rate,D);g=new Image;g.imaginaryID=-1;g.addEventListener("load",function(){f[this.imaginaryID].loaded?
z.clearRect(0,0,this.width,this.height):f[this.imaginaryID].loaded=!0;u();e[1].width=this.width;e[1].height=this.height;z.drawImage(this,0,0);q=this.imaginaryID;x=0;y&&F();B()},!1);for(b=0;b<f.length;b++)f[b].desig=b?b==f.length-1?1:0:-1,f[b].loaded=!1;for(b=0;b<c.config.imgprebuffer;b++)t.push(new Image),t[b].imaginaryID=-1,t[b].addEventListener("load",h,!1);for(b=0;b<c.config.imgpostbuffer;b++)r.push(new Image),r[b].imaginaryID=-1,r[b].addEventListener("load",h,!1);p(g,void 0===v||null===v?n.startpage:
v);e[1].height=480;e[1].width=640;e[1].background=n.back;e[1].style.zIndex=1;e[1].style.position="relative";k?k.appendChild(e[1]):document.body.appendChild(e[1])};
