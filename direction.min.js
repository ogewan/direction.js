/*! direction.js (c) 2015 Oluwaseun Ogedengbe, MIT seun40.github.io/direction.js/*/var direction=function(d,f){if(void 0===d)return-1;if("string"===typeof d)d={parent:null,offset:0,loading:{lines:16,rate:1E3/30,width:250,height:250,xpos:.5,ypos:.5,back:"#FFF",color:"#373737"},config:{dir:"assets/",pagestartnum:!1,chapterstartnum:!1,imgprebuffer:5,imgpostbuffer:5,startpage:0,back:"#FFF"},pages:[{alt:"",hover:"",title:"",url:[d],release:0,note:"",perm:!1,anim8:!1}],chapters:[]};else if(Array.isArray(d)){for(var h={parent:null,offset:0,loading:{lines:16,rate:1E3/30,width:250,height:250,
xpos:.5,ypos:.5,back:"#FFF",color:"#373737"},config:{dir:"assets/",pagestartnum:!1,chapterstartnum:!1,imgprebuffer:5,imgpostbuffer:5,startpage:0,back:"#FFF"},pages:[],chapters:[]},c=0;c<d.length;c++)h.pages.push({alt:"",hover:"",title:"",url:d[c],release:0,note:"",perm:!1,anim8:!1});d=h}else if(void 0===d.pages[0].url)return-1;if(void 0===f||null==f)f=0;var b=this;this.iimg=d.pages;this.count=d.pages.length;this.current=-1;this.spinner=d.loading;this.config=d.config;this.parent=d.parent;this.offset=
d.offset;this.pstload=[];this.preload=[];this.master=new Image;var k={acW:300,acH:300};this.layers=[document.createElement("canvas"),document.createElement("canvas")];this.context=this.layers[1].getContext("2d");this.spin=function(a){var b=parseInt((Date.now()-a.start)/1E3*a.lines)/a.lines;a.context.save();a.context.clearRect(0,0,a.acW,a.acH);a.context.translate(a.acW/2,a.acH/2);a.context.rotate(2*Math.PI*b);var c=a.color.substr(1);3==c.length&&(c=c[0]+C[0]+c[1]+c[1]+c[2]+c[2]);for(var b=parseInt(c.substr(0,
2),16).toString(),d=parseInt(c.substr(2,2),16).toString(),c=parseInt(c.substr(4,2),16).toString(),f=0;f<a.lines;f++)a.context.beginPath(),a.context.rotate(2*Math.PI/a.lines),a.context.moveTo(a.cW/10,0),a.context.lineTo(a.cW/4,0),a.context.lineWidth=a.cW/30,a.context.strokeStyle="rgba("+b+","+d+","+c+","+f/a.lines+")",a.context.stroke();a.context.restore()};this.preloadGeneric=function(){b.iimg[this.imaginaryID].loaded=!0};this.preloadMaster=function(){b.iimg[this.imaginaryID].loaded?b.context.clearRect(0,
0,this.width,this.height):b.iimg[this.imaginaryID].loaded=!0;b.layers[1].width=b.layers[0].width=k.acW=this.width;b.layers[1].height=b.layers[0].height=k.acH=this.height;b.context.drawImage(this,0,0);b.current=this.imaginaryID};var g=function(a,c){b.iimg[c].loaded||b.context.clearRect(0,0,b.layers[1].width,b.layers[1].height);a.imaginaryID=c;a.src=b.iimg[c].url;for(var d=0,e=c-1;e>c-b.config.imgprebuffer-1&&0<=e;e--)b.iimg[e].loaded||(b.preload[d].imaginaryID=e,b.preload[d].src=b.iimg[e].url,d++);
d=0;for(e=c+1;e<b.config.imgpostbuffer+c+1&&e<b.count;e++)b.iimg[e].loaded||(b.pstload[d].imaginaryID=e,b.pstload[d].src=b.iimg[e].url,d++)};this.go=function(a){a=parseInt(a);a=isNaN(a)?0:a;g(b.master,Math.floor(Math.max(0,Math.min(b.count-1,a))));return a};this.prev=function(){var a=b.count-1;0<=a&&g(b.master,a);return a};this.next=function(){var a=b.current+1;a<b.count&&g(b.master,a);return a};this.frst=function(){0<=b.current&&g(b.master,0);return 0};this.last=function(){g(b.master,b.count-1);
return b.count-1};this.rand=function(){var a=Math.floor(Math.random()*b.count-1);g(b.master,a);return a};this.layers[0].height=480;this.layers.width=640;this.layers[0].style.background=this.spinner.back;this.layers[0].style.zIndex=0;this.layers[0].style.position="absolute";k=h={context:this.layers[0].getContext("2d"),color:this.spinner.color,start:Date.now(),lines:this.spinner.lines,cW:this.spinner.width,cH:this.spinner.height,acW:this.layers[1].width,acH:this.layers[1].height};f?f.appendChild(this.layers[0]):
document.body.appendChild(this.layers[0]);window.setInterval(this.spin,this.spinner.rate,h);this.master=new Image;this.master.imaginaryID=-1;this.master.addEventListener("load",this.preloadMaster,!1);for(c=0;c<this.iimg.length;c++)this.iimg[c].desig=c?c==this.iimg.length-1?1:0:-1,this.iimg[c].loaded=!1;for(c=0;c<d.config.imgprebuffer;c++)this.preload.push(new Image),this.preload[c].imaginaryID=-1,this.preload[c].addEventListener("load",this.preloadGeneric,!1);for(c=0;c<d.config.imgpostbuffer;c++)this.pstload.push(new Image),
this.pstload[c].imaginaryID=-1,this.pstload[c].addEventListener("load",this.preloadGeneric,!1);this.layers[1].height=480;this.layers[1].width=640;this.layers[1].background=this.config.back;this.layers[1].style.zIndex=1;this.layers[1].style.position="absolute";f?f.appendChild(this.layers[1]):document.body.appendChild(this.layers[1])};