/*
 direction.js (c) 2015 Ogewan, MIT*/
 direction=function(q,m,u,b){if(void 0===q)return-1;u=u||0;b=b||{};if(void 0===m||null==m)m=document.body;var e=q.slice().map(function(a){return{s:a}}),v=!0,w=-1,n=-1,l={lines:b.lines||16,rate:b.rate||1E3/30,dia:b.diameter||250,back:b.loaderback||"#FFF",color:b.color||"#373737"},h={dir:b.dir||"",irb:b.imgprebuffer||5,itb:b.imgpostbuffer||5,back:b.back||"#FFF"},r=[],t=[],k=new Image,x=!0,f=[document.createElement("canvas"),document.createElement("canvas")],y=f[1].getContext("2d"),g={run:function(a){for(var d=
    0;d<g[a].length;d++)g[a][d]()},start:[],slidn:[],slidd:[]},z={ctx:f[0].getContext("2d"),color:l.color,start:Date.now(),lines:l.lines,dia:l.dia,rate:l.rate},A=function(a){f[0].style.paddingLeft=(f[1].width-300)/2+"px";var d=Math.floor((Date.now()-a.start)/1E3*a.lines)/a.lines,c=a.color.substr(1);a.ctx.save();a.ctx.clearRect(0,0,300,f[1].height);a.ctx.translate(150,f[1].height/2);a.ctx.rotate(2*Math.PI*d);3==c.length&&(c=c[0]+C[0]+c[1]+c[1]+c[2]+c[2]);d=parseInt(c.substr(0,2),16).toString();var b=parseInt(c.substr(2,
    2),16).toString();c=parseInt(c.substr(4,2),16).toString();for(var e=0;e<a.lines;e++)a.ctx.beginPath(),a.ctx.rotate(2*Math.PI/a.lines),a.ctx.moveTo(a.dia/10,0),a.ctx.lineTo(a.dia/4,0),a.ctx.lineWidth=a.dia/30,a.ctx.strokeStyle="rgba("+d+","+b+","+c+","+e/a.lines+")",a.ctx.stroke();a.ctx.restore();v?window.setTimeout(A,a.rate,z):a.ctx.clearRect(0,0,300,f[1].height)},B=function(a,d){if(null===a||void 0===a)a={x:0,y:0};else if(isNaN(a)){if(null===a.y||void 0===a.y)a.y=0;if(null===a.x||void 0===a.x)a.x=
    0}else a={x:0,y:a};if(null===d||void 0===d||0>=d)d=400;0>a.y&&(a.y=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight);0>a.x&&(a.x=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth);var c={x:void 0!==window.pageXOffset?a.x-window.pageXOffset:a.x-document.documentElement.scrollLeft,y:void 0!==window.pageYOffset?a.y-window.pageYOffset:a.y-document.documentElement.scrollTop};if(c=={x:0,y:0})return c;var b=function(a,d,c){window.scrollBy(Math.floor(a.x)/
    d,Math.floor(a.y)/d);c+1<5*d&&(w=window.setTimeout(b,5,a,d,c+1))};w=window.setTimeout(b,5,c,Math.floor(d/5),0);return c};q=function(){e[this.imaginaryID].loaded=!0};var p=function(a,d){v=!0;window.setTimeout(A,l.rate,z);g.run("start");0>d&&(d=0);d>=e.length&&(d=e.length-1);if(!(0>d)){e[d].loaded||y.clearRect(0,0,f[1].width,f[1].height);a.imaginaryID=d;a.src=h.dir+e[d].s;n=d;var c=0,b;for(b=d-1;b>d-h.irb-1&&0<=b;b--)e[b].loaded||(t[c].imaginaryID=b,t[c].src=h.dir+e[b].s,c++);c=0;for(b=d+1;b<h.itb+
    d+1&&b<e.length;b++)e[b].loaded||(r[c].imaginaryID=b,r[c].src=h.dir+e[b].s,c++)}},D=function(a,b){for(var d in b)a.hasOwnProperty(d)&&(a[d]=b[d])};b=function(){try{jQuery.fn.direction=function(a,b,c){return this.each(function(){direction(a,$(this),b,c)})}}catch(a){console.log("failed to attach to jQuery")}};window.jQuery&&b();this.canvi=f;this.cb=g;this.cnl=function(){window.clearTimeout(w)};this.swap=function(a,b,c){e=Array.isArray(a)?a.slice().map(function(b,d){return{s:b,d:d?d==a-1?1:0:-1}}):e;
    b&&(D(l,b),D(h,b));this.go(c||0)};this.count=function(){return e.length};this.current=function(){return n};this.callback=function(a,b,c){if(null===a||void 0===a)return g.slidn;if(null===b||void 0===b)return null===c||void 0===c?a?0<a?g.slidd[c]:g.start[c]:g.slidn[c]:a?0<a?g.slidd:g.start:g.slidn;!a||null!==c&&void 0!==c?null!==c&&void 0!==c||g.slidn.push(b):0<a?g.slidd.push(b):g.start.push(b);return 1};this.go=function(a){a=null===a||void 0===a?0:parseInt(a,10);a=isNaN(a)?0:a;p(k,Math.floor(Math.max(0,
    Math.min(e.length-1,a))));return a};this.prev=function(){var a=n-1;0<=a&&p(k,a);return a};this.next=function(){var a=n+1;a<e.length&&p(k,a);return a};this.frst=function(){0<=n&&p(k,0);return 0};this.last=function(){p(k,e.length-1);return e.length-1};this.rand=function(){var a=Math.floor(Math.random()*(e.length-1));p(k,a);return a};this.data=function(a){a=null===a||void 0===a?n:parseInt(a,10);return isNaN(a)?e[n]:e[Math.floor(Math.max(0,Math.min(e.length-1,a)))]};this.scroll=function(a){null!==a&&
    void 0!==a&&(x=a);return x};this.scrollTo=function(a,b){return B(a,b)};f[0].height=480;f[0].style.background=l.back;f[0].style.paddingLeft="170px";f[0].style.zIndex=0;f[0].style.position="absolute";m?m.appendChild(f[0]):document.body.appendChild(f[0]);window.setTimeout(A,l.rate,z);k=new Image;k.imaginaryID=-1;k.addEventListener("load",function(){e[this.imaginaryID].loaded?y.clearRect(0,0,this.width,this.height):e[this.imaginaryID].loaded=!0;g.run("slidn");f[1].width=this.width;f[1].height=f[0].height=
    this.height;y.drawImage(this,0,0);v=0;x&&B();g.run("slidd")},!1);for(b=0;b<e.length;b++)e[b].d=b?b==e.length-1?1:0:-1,e[b].loaded=!1;for(b=0;b<h.irb;b++)t.push(new Image),t[b].imaginaryID=-1,t[b].addEventListener("load",q,!1);for(b=0;b<h.itb;b++)r.push(new Image),r[b].imaginaryID=-1,r[b].addEventListener("load",q,!1);p(k,h.startpage||u);f[1].height=480;f[1].width=640;f[1].background=h.back;f[1].style.zIndex=1;f[1].style.position="relative";m?m.appendChild(f[1]):document.body.appendChild(f[1])};