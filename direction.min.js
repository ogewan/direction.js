/*
 direction.js (c) 2015 Ogewan, MIT*/
 direction=function(q,m,v,b){if(void 0===q)return-1;v=v||0;b=b||{};if(void 0===m||null==m)m=document.body;var e=q.slice().map(function(a){return{s:a}}),w=!0,x=-1,n=-1,l={lines:b.lines||16,rate:b.rate||1E3/30,dia:b.diameter||250,back:b.loaderback||"#FFF",color:b.color||"#373737"},k={dir:b.dir||"",irb:b.imgprebuffer||5,itb:b.imgpostbuffer||5,back:b.back||"#FFF",sz:b.size||{w:void 0,h:void 0}},r=[],t=[],g=new Image,y=!0,f=[document.createElement("canvas"),document.createElement("canvas")],u=f[1].getContext("2d"),
 h={run:function(a){for(var d=0;d<h[a].length;d++)h[a][d]()},start:[],slidn:[],slidd:[]},z={ctx:f[0].getContext("2d"),color:l.color,start:Date.now(),lines:l.lines,dia:l.dia,rate:l.rate},A=function(a){f[0].style.paddingLeft=(f[1].width-300)/2+"px";var d=Math.floor((Date.now()-a.start)/1E3*a.lines)/a.lines,c=a.color.substr(1);a.ctx.save();a.ctx.clearRect(0,0,300,f[1].height);a.ctx.translate(150,f[1].height/2);a.ctx.rotate(2*Math.PI*d);3==c.length&&(c=c[0]+C[0]+c[1]+c[1]+c[2]+c[2]);d=parseInt(c.substr(0,
 2),16).toString();var b=parseInt(c.substr(2,2),16).toString();c=parseInt(c.substr(4,2),16).toString();for(var e=0;e<a.lines;e++)a.ctx.beginPath(),a.ctx.rotate(2*Math.PI/a.lines),a.ctx.moveTo(a.dia/10,0),a.ctx.lineTo(a.dia/4,0),a.ctx.lineWidth=a.dia/30,a.ctx.strokeStyle="rgba("+d+","+b+","+c+","+e/a.lines+")",a.ctx.stroke();a.ctx.restore();w?window.setTimeout(A,a.rate,z):a.ctx.clearRect(0,0,300,f[1].height)},B=function(a,d){if(null===a||void 0===a)a={x:0,y:0};else if(isNaN(a)){if(null===a.y||void 0===
 a.y)a.y=0;if(null===a.x||void 0===a.x)a.x=0}else a={x:0,y:a};if(null===d||void 0===d||0>=d)d=400;0>a.y&&(a.y=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight);0>a.x&&(a.x=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth);var c={x:void 0!==window.pageXOffset?a.x-window.pageXOffset:a.x-document.documentElement.scrollLeft,y:void 0!==window.pageYOffset?a.y-window.pageYOffset:a.y-document.documentElement.scrollTop};if(c=={x:0,y:0})return c;
 var b=function(a,d,c){window.scrollBy(Math.floor(a.x)/d,Math.floor(a.y)/d);c+1<5*d&&(x=window.setTimeout(b,5,a,d,c+1))};x=window.setTimeout(b,5,c,Math.floor(d/5),0);return c};q=function(){e[this.virID].loaded=!0};var p=function(a,d){w=!0;window.setTimeout(A,l.rate,z);h.run("start");0>d&&(d=0);d>=e.length&&(d=e.length-1);if(!(0>d)){e[d].loaded||u.clearRect(0,0,f[1].width,f[1].height);a.virID=d;a.src=k.dir+e[d].s;n=d;var c=0,b;for(b=d-1;b>d-k.irb-1&&0<=b;b--)e[b].loaded||(t[c].virID=b,t[c].src=k.dir+
 e[b].s,c++);c=0;for(b=d+1;b<k.itb+d+1&&b<e.length;b++)e[b].loaded||(r[c].virID=b,r[c].src=k.dir+e[b].s,c++)}},D=function(a,b){for(var d in b)a.hasOwnProperty(d)&&(a[d]=b[d])};b=function(){try{jQuery.fn.direction=function(a,b,c){return this.each(function(){direction(a,$(this),b,c)})}}catch(a){console.log(a)}};window.jQuery&&b();this.canvi=f;this.cb=h;this.cnl=function(){window.clearTimeout(x)};this.swap=function(a,b,c){e=Array.isArray(a)?a.slice().map(function(b,d){return{s:b,d:d?d==a.length-1?1:0:
 -1}}):e;b&&(D(l,b),D(k,b));this.go(c||0)};this.count=function(){return e.length};this.current=function(){return n};this.callback=function(a,b,c){if(null===a||void 0===a)return h.slidn;if(null===b||void 0===b)return null===c||void 0===c?a?0<a?h.slidd[c]:h.start[c]:h.slidn[c]:a?0<a?h.slidd:h.start:h.slidn;!a||null!==c&&void 0!==c?null!==c&&void 0!==c||h.slidn.push(b):0<a?h.slidd.push(b):h.start.push(b);return 1};this.go=function(a){a=null===a||void 0===a?0:parseInt(a,10);a=isNaN(a)?0:a;p(g,Math.floor(Math.max(0,
 Math.min(e.length-1,a))));return a};this.prev=function(){var a=n-1;0<=a&&p(g,a);return a};this.next=function(){var a=n+1;a<e.length&&p(g,a);return a};this.frst=function(){0<=n&&p(g,0);return 0};this.last=function(){p(g,e.length-1);return e.length-1};this.rand=function(){var a=Math.floor(Math.random()*(e.length-1));p(g,a);return a};this.data=function(a){a=null===a||void 0===a?n:parseInt(a,10);return isNaN(a)?e[n]:e[Math.floor(Math.max(0,Math.min(e.length-1,a)))]};this.scroll=function(a){null!==a&&
 void 0!==a&&(y=a);return y};this.scrollTo=function(a,b){return B(a,b)};f[0].height=480;f[0].style.background=l.back;f[0].style.paddingLeft="170px";f[0].style.zIndex=0;f[0].style.position="absolute";m?m.appendChild(f[0]):document.body.appendChild(f[0]);window.setTimeout(A,l.rate,z);g=new Image;g.virID=-1;g.addEventListener("load",function(){e[g.virID].loaded?u.clearRect(0,0,g.width,g.height):e[g.virID].loaded=!0;h.run("slidn");k.sz?u.drawImage(g,0,0,k.sz.w,k.sz.h):(f[1].width=g.width,f[1].height=f[0].height=
 g.height,u.drawImage(g,0,0));w=0;y&&B();h.run("slidd")},!1);for(b=0;b<e.length;b++)e[b].d=b?b==e.length-1?1:0:-1,e[b].loaded=!1;for(b=0;b<k.irb;b++)t.push(new Image),t[b].virID=-1,t[b].addEventListener("load",q,!1);for(b=0;b<k.itb;b++)r.push(new Image),r[b].virID=-1,r[b].addEventListener("load",q,!1);p(g,k.startpage||v);f[1].height=480;f[1].width=640;f[1].background=k.back;f[1].style.zIndex=1;f[1].style.position="relative";m?m.appendChild(f[1]):document.body.appendChild(f[1])};